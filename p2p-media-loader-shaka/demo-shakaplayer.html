<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">

    <script src="p2p-media-loader-core.js"></script>
    <script src="p2p-media-loader-shaka.js"></script>

    <script src="https://github.com/videojs/mux.js/releases/download/v4.4.0/mux.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/2.4.2/shaka-player.compiled.js"></script>

</head>
<body>

    <video id="video" width="640" poster="https://shaka-player-demo.appspot.com/assets/poster.jpg" controls autoplay muted></video>

    <script>

        shaka.polyfill.installAll();

        if (shaka.Player.isBrowserSupported() && p2pml.shaka.Engine.isSupported()) {
            var engine = new p2pml.shaka.Engine();

            var video = document.getElementById("video");
            var player = new shaka.Player(video);
            var onError = function(error) { console.error("Error code", error.code, "object", error); }
            player.addEventListener("error", function(event) { onError(event.detail); });

            engine.initShakaPlayer(player);

            player.load(
                //"https://storage.googleapis.com/shaka-live-assets/player-source.m3u8"
                "https://storage.googleapis.com/shaka-live-assets/player-source.mpd"
            ).catch(onError);
        } else {
            document.write("Not supported :(");
        }

    </script>

</body>
</html>
