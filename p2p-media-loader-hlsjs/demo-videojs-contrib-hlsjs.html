<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">

    <script src="p2p-media-loader-core.js"></script>
    <script src="p2p-media-loader-hlsjs.js"></script>

    <link href="https://vjs.zencdn.net/5.19.2/video-js.css" rel="stylesheet">
    <script src="https://vjs.zencdn.net/5.19.2/video.js"></script>
    <script src="https://unpkg.com/videojs-contrib-hls.js@3.0.2"></script>

    <style>
        #video {
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
            display: block;
        }
    </style>

</head>
<body>

    <video id="video" class="video-js vjs-default-skin" preload="none" autoplay controls></video>

    <script>

        if (p2pml.hlsjs.Engine.isSupported()) {
            var engine = new p2pml.hlsjs.Engine();

            var player = videojs("video", {
                html5: {
                    hlsjsConfig: {
                        liveSyncDurationCount: 7, // To have at least 7 segments in queue
                        loader: engine.createLoaderClass()
                    }
                }
            });

            p2pml.hlsjs.initVideoJsContribHlsJsPlayer(player);

            player.src({
                src: "https://wowza.peer5.com/live/smil:bbb_abr.smil/playlist.m3u8",
                //src: "https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8",
                type: "application/x-mpegURL"
            });

            player.ready(function() {
                player.volume(0.01); // 1%
            });
        } else {
            document.write("Not supported :(");
        }

    </script>

</body>
</html>
